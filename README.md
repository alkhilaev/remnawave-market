# üöÄ Remnawave Market

–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å VPN –ø–æ–¥–ø–∏—Å–æ–∫ –¥–ª—è [Remnawave](https://rw.docs) —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º. –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ —Å –≥–∏–±–∫–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ–ø–ª–∞—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤—ã–¥–∞—á–µ–π –∫–ª—é—á–µ–π.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: JWT –Ω–∞ –æ—Å–Ω–æ–≤–µ email/–ø–∞—Ä–æ–ª—è (Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- ü§ñ **Telegram –±–æ—Ç**: –ü–æ–∫—É–ø–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ —á–µ—Ä–µ–∑ Telegram
- üí∞ **–ì–∏–±–∫–∞—è –æ–ø–ª–∞—Ç–∞**: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∏–ª–∏ –ø—Ä—è–º–∞—è –æ–ø–ª–∞—Ç–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- üí≥ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –∏ –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è
- üì¶ **–ì–∏–±–∫–∏–µ —Ç–∞—Ä–∏—Ñ—ã**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üîÑ **–ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- üéØ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Remnawave**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ VPN –∫–ª—é—á–µ–π —á–µ—Ä–µ–∑ Remnawave API
- üìä **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ç–∞—Ä–∏—Ñ–∞–º–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- üê≥ **Docker –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å Docker Compose
- üìö **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–∞—è Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üèóÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: NestJS (TypeScript)
- **Telegram –±–æ—Ç**: Telegraf (TypeScript)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **ORM**: Prisma
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: JWT (Passport)
- **–ü–ª–∞—Ç–µ–∂–∏**: –ÆKassa
- **VPN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: Remnawave SDK
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger/OpenAPI
- **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤**: pnpm
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker & Docker Compose

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 20+
- pnpm 9+
- Docker & Docker Compose
- PostgreSQL 16+ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker)
- Remnawave –∏–Ω—Å—Ç–∞–Ω—Å —Å API –¥–æ—Å—Ç—É–ø–æ–º
- –ê–∫–∫–∞—É–Ω—Ç –ÆKassa (–¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π)
- Telegram –±–æ—Ç —Ç–æ–∫–µ–Ω –æ—Ç [@BotFather](https://t.me/BotFather)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- **API**: http://127.0.0.1:3000/api/v1
- **Swagger Docs**: http://127.0.0.1:3000/docs
- **Database UI (Adminer)**: http://127.0.0.1:8080
- **Health Check**: http://127.0.0.1:3000/api/v1/health

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `127.0.0.1` –≤–º–µ—Å—Ç–æ `localhost` –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å IPv6.

## üî• Hot Reload –≤ Docker

Docker dev —Ä–µ–∂–∏–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π hot reload**:

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏:**
- –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤ `src/`
- Prisma —Å—Ö–µ–º–∞ –≤ `prisma/`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (`tsconfig.json`, `nest-cli.json`)
- `.env` —Ñ–∞–π–ª (–ø–æ—Å–ª–µ `make docker-dev-restart`)

‚ùå **–¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ (`make docker-dev-reload`):**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`package.json`)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ `Dockerfile`

üöÄ **–ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –ò–∑–º–µ–Ω–∏–ª–∏ .env? –ë—ã—Å—Ç—Ä—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç (~5 —Å–µ–∫)
make docker-dev-restart

# –£—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø–∞–∫–µ—Ç? –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ (~1-2 –º–∏–Ω)
make docker-dev-reload

# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make docker-dev-logs-app
```

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞, –ø–µ—Ä–µ–π–¥–∏—Ç–µ:

**Swagger UI**: [http://127.0.0.1:3000/docs](http://127.0.0.1:3000/docs)

> **–í–∞–∂–Ω–æ**: Swagger –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤ production —á–µ—Ä–µ–∑ `.env`:
> ```env
> SWAGGER_ENABLED=false
> ```

–ò–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é](./openapi.yaml).

### –ö–ª—é—á–µ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /api/v1/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/v1/auth/login` - –í—Ö–æ–¥
- `POST /api/v1/auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `GET /api/v1/auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

#### –ë–∞–ª–∞–Ω—Å
- `GET /api/v1/balance` - –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å
- `POST /api/v1/balance/deposit` - –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å

#### –¢–∞—Ä–∏—Ñ—ã
- `GET /api/v1/plans` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞—Ä–∏—Ñ–æ–≤
- `POST /api/v1/plans` - –°–æ–∑–¥–∞—Ç—å —Ç–∞—Ä–∏—Ñ (–ê–¥–º–∏–Ω)
- `GET /api/v1/plans/:id` - –î–µ—Ç–∞–ª–∏ —Ç–∞—Ä–∏—Ñ–∞
- `PATCH /api/v1/plans/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ (–ê–¥–º–∏–Ω)
- `DELETE /api/v1/plans/:id` - –£–¥–∞–ª–∏—Ç—å —Ç–∞—Ä–∏—Ñ (–ê–¥–º–∏–Ω)

#### –ü–æ–¥–ø–∏—Å–∫–∏
- `GET /api/v1/subscriptions` - –°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/subscriptions` - –ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
- `GET /api/v1/subscriptions/:id` - –î–µ—Ç–∞–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- `POST /api/v1/subscriptions/:id/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
- `POST /api/v1/subscriptions/:id/toggle-auto-renewal` - –í–∫–ª/–≤—ã–∫–ª –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ

#### –ü–ª–∞—Ç–µ–∂–∏
- `GET /api/v1/payments/history` - –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- `POST /api/v1/payments/webhook/yookassa` - Webhook –ÆKassa

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–º. [.env.example](./.env.example) –¥–ª—è –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø—Ü–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://user:pass@localhost:5432/remnawave_market

# JWT
JWT_SECRET=your-secret-key
JWT_ACCESS_TOKEN_EXPIRATION=15m
JWT_REFRESH_TOKEN_EXPIRATION=7d

# Remnawave
REMNAWAVE_PANEL_URL=http://your-remnawave-instance:3000
REMNAWAVE_API_TOKEN=your-api-token

# –ÆKassa
YOOKASSA_SHOP_ID=your-shop-id
YOOKASSA_SECRET_KEY=your-secret-key
YOOKASSA_AUTO_RENEWAL_ENABLED=false
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üó∫Ô∏è Roadmap

- [ ] Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- [ ] –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (i18n)
- [ ] –û–ø–ª–∞—Ç–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π (TON, USDT)
- [ ] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞
- [ ] UI –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
- [ ] UI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ø–∞–Ω–µ–ª–∏

---
